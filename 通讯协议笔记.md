# 通讯协议笔记

## 1.UART（Universal Asynchronous Receiver Transmitter）通用异步收发器

一种通用的串行、异步通信总线。

两条数据线，可以实现全双工的发送和接收。一根线对外发送数据，一根线对外接收数据

异步：发送、接收方的时钟不一样。收发双方时钟不同步

### 通信基础

#### 1.并行和串行

##### 1.1并行

一次性传递多个数据位。在同等情况下，并行总线确实速度会快，

但是它也存在一些问题：

1. 使用的总线条数较多，会浪费资源，布线难度大。
2. 它不同数据线之间，在进行数据传递的时候，会相互干扰。

##### 1.2.串行通信

只有一根数据线，数据依次传递

1.3总结

在做大多数项目的时候，还是使用串行总线。I2C 、 SPI

#### 2.单工和双工

##### 2.1 单工

数据传输是单向的。

![image-20250515163904070](assets/image-20250515163904070.png)

##### 2.2双工

数据传输的方向是双向的。

半双工：A->B   和  B->A这两种发送消息的状态是不能同时进行的。只有一根总线。

双工：：A->B   和  B->A这两种发送消息的状态可以同时进行。有两根总线。

![image-20250515163957169](assets/image-20250515163957169.png)

#### 3.波特率

描述串口的通信速度。每秒钟传送bit的数量。

![image-20250515164400408](assets/image-20250515164400408.png)

### UART帧格式

![image-20250515164608733](assets/image-20250515164608733.png)

串口协议规定：在不发数据的时候（空闲的时候），数据线上的状态必须是**高电平**。

起始信号：告诉对方我要发送数据了，所有是需要发送一个**低电平**。

数据位：先发底数据位，再发高数据位。

校验位（可有可无）：奇偶校验，发送的数据里有偶数个1，校验位就为1；发送的数据里有奇数个1，校验位就为0。

停止位（1/1.5/2位）：必须是高电平，表示一次通信的结束。

串口通信不允许连续发送，每一次通信最多只能发送一个字节。防止累计误差的出现。

### UART硬件连接

![image-20250515173001004](assets/image-20250515173001004.png)

### UART控制器

![image-20250515173232645](assets/image-20250515173232645.png)